import React from "react";
import styles from "./index.module.less";

class Loading extends React.Component {
	constructor(props) {
		super(props);
		this.state = {
			loading: false
		};
	}

	componentDidMount(props) {
		if (this.props.loading) {
			this.setState({
				loading: this.props.loading
			});
		}
	}

	componentWillUnmount() {
		this.setState({
			loading: false
		});
	}

	render() {
		return (
			<>
				{this.state.loading && (
					<div className={styles.main}>
						<div>
							<div className={styles["loading"]} />
							<div className={styles["loading-text"]}>
								加载中...
							</div>
						</div>
					</div>
				)}
				{this.props.children}
			</>
		);
	}
}

export default Loading;
